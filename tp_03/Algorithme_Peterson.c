#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>
#include <unistd.h>
#include <stdbool.h>
#include <time.h>

int x = 0;
bool Drapeaux[2] = {false,false};
int tour = 0;

//fonction incrementation
void *increment (void *arg){
        Drapeaux[0] == true;
        tour = 1;
   
    while (Drapeaux[1] && tour== 1){
    }
    sleep(1);
     x++;
        printf("x++\n");
    Drapeaux[0] = false;
   
} 

//fonction decrementation
void *decrement(void *arg){
    Drapeaux[1] == true;
        tour = 0;
   
    while (Drapeaux[0] && tour== 0){
    }
      sleep(1);
        x--;
       printf("x--");
    Drapeaux[1] = false;
}

int main(){

  pthread_t threadInc, threadDec;

  pthread_create(&threadInc,NULL,increment,&x);
  pthread_create(&threadDec,NULL,decrement,&x);

 if (threadInc == -1)
    printf("erreur lors de la creation de Incr_result");
 if (threadDec == -1)
    printf("erreur lors de la creation de Decr_result");

  pthread_join(threadInc, NULL);
  pthread_join(threadDec, NULL);

  return 0;

}